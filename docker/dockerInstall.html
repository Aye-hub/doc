<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker安装 | 1mi Doc</title>
    <meta name="description" content="旨在帮助开发者更快更准确的查询Linux、Docker命令">
    <link rel="icon" href="/doc/favicon.ico">
    
    <link rel="preload" href="/doc/assets/css/0.styles.cab67e74.css" as="style"><link rel="preload" href="/doc/assets/js/app.b62443c3.js" as="script"><link rel="preload" href="/doc/assets/js/2.101d40a6.js" as="script"><link rel="preload" href="/doc/assets/js/8.9b1365b6.js" as="script"><link rel="prefetch" href="/doc/assets/js/10.9df0a468.js"><link rel="prefetch" href="/doc/assets/js/11.9b7540a0.js"><link rel="prefetch" href="/doc/assets/js/12.eaf11822.js"><link rel="prefetch" href="/doc/assets/js/13.2ad76932.js"><link rel="prefetch" href="/doc/assets/js/14.579d78fc.js"><link rel="prefetch" href="/doc/assets/js/15.48968a21.js"><link rel="prefetch" href="/doc/assets/js/16.be948b1a.js"><link rel="prefetch" href="/doc/assets/js/17.edb4a392.js"><link rel="prefetch" href="/doc/assets/js/18.af37d574.js"><link rel="prefetch" href="/doc/assets/js/19.ee241fac.js"><link rel="prefetch" href="/doc/assets/js/20.0d4e9edf.js"><link rel="prefetch" href="/doc/assets/js/21.ec597d1c.js"><link rel="prefetch" href="/doc/assets/js/22.5ec04167.js"><link rel="prefetch" href="/doc/assets/js/23.2ad1761c.js"><link rel="prefetch" href="/doc/assets/js/24.a279d02a.js"><link rel="prefetch" href="/doc/assets/js/25.3cdf31fd.js"><link rel="prefetch" href="/doc/assets/js/3.e7dfe719.js"><link rel="prefetch" href="/doc/assets/js/4.81e8b8e8.js"><link rel="prefetch" href="/doc/assets/js/5.db136852.js"><link rel="prefetch" href="/doc/assets/js/6.1c4e0b70.js"><link rel="prefetch" href="/doc/assets/js/7.cf02192b.js"><link rel="prefetch" href="/doc/assets/js/9.6a69ea25.js">
    <link rel="stylesheet" href="/doc/assets/css/0.styles.cab67e74.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc/" class="home-link router-link-active"><!----> <span class="site-name">1mi Doc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/doc/linux/" class="nav-link">Linux文档</a></div><div class="nav-item"><a href="/doc/docker/" class="nav-link router-link-active">Docker文档</a></div><div class="nav-item"><a href="http://1024core.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Aye-hub" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doc/" class="nav-link">Home</a></div><div class="nav-item"><a href="/doc/linux/" class="nav-link">Linux文档</a></div><div class="nav-item"><a href="/doc/docker/" class="nav-link router-link-active">Docker文档</a></div><div class="nav-item"><a href="http://1024core.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Aye-hub" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/doc/docker/" class="sidebar-link">写在前面</a></li><li><a href="/doc/docker/introduction.html" class="sidebar-link">Docker简介</a></li><li><a href="/doc/docker/dockerInstall.html" class="active sidebar-link">Docker安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#三要素" class="sidebar-link">三要素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#镜像" class="sidebar-link">镜像</a></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#容器" class="sidebar-link">容器</a></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#仓库" class="sidebar-link">仓库</a></li></ul></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#仓库-镜像-容器概念" class="sidebar-link">仓库/镜像/容器概念</a></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#docker安装并设置镜像加速" class="sidebar-link">Docker安装并设置镜像加速</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#下载rpm包" class="sidebar-link">下载rpm包</a></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#安装防火墙" class="sidebar-link">安装防火墙</a></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#更新软件包" class="sidebar-link">更新软件包</a></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#安装rpm包" class="sidebar-link">安装rpm包</a></li><li class="sidebar-sub-header"><a href="/doc/docker/dockerInstall.html#docker-镜像仓库加速配置" class="sidebar-link">Docker 镜像仓库加速配置</a></li></ul></li></ul></li><li><a href="/doc/docker/mirrorCommand.html" class="sidebar-link">镜像命令</a></li><li><a href="/doc/docker/containerCommand.html" class="sidebar-link">容器命令</a></li><li><a href="/doc/docker/principle.html" class="sidebar-link">Docker镜像原理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker安装"><a href="#docker安装" aria-hidden="true" class="header-anchor">#</a> Docker安装</h1> <p></p><div class="table-of-contents"><ul><li><a href="#三要素">三要素</a><ul><li><a href="#镜像">镜像</a></li><li><a href="#容器">容器</a></li><li><a href="#仓库">仓库</a></li></ul></li><li><a href="#仓库-镜像-容器概念">仓库/镜像/容器概念</a></li><li><a href="#docker安装并设置镜像加速">Docker安装并设置镜像加速</a><ul><li><a href="#下载rpm包">下载rpm包</a></li><li><a href="#安装防火墙">安装防火墙</a></li><li><a href="#更新软件包">更新软件包</a></li><li><a href="#安装rpm包">安装rpm包</a></li><li><a href="#docker-镜像仓库加速配置">Docker 镜像仓库加速配置</a></li></ul></li></ul></div><p></p> <h2 id="三要素"><a href="#三要素" aria-hidden="true" class="header-anchor">#</a> 三要素</h2> <h3 id="镜像"><a href="#镜像" aria-hidden="true" class="header-anchor">#</a> 镜像</h3> <p><code>Docker</code>镜像（image）就是一个只读的模板，镜像可以用来创建<code>Docker</code>容器，一个镜像可以创建很多容器。</p> <h3 id="容器"><a href="#容器" aria-hidden="true" class="header-anchor">#</a> 容器</h3> <p><code>Docker</code>利用容器（Container）独立运行的一个或一组应用。容器是用镜像创建的运行实例。</p> <h3 id="仓库"><a href="#仓库" aria-hidden="true" class="header-anchor">#</a> 仓库</h3> <p>仓库（Repository）是集中存放镜像文件的场所。</p> <h2 id="仓库-镜像-容器概念"><a href="#仓库-镜像-容器概念" aria-hidden="true" class="header-anchor">#</a> 仓库/镜像/容器概念</h2> <ul><li><code>image</code>文件生成的容器实例，本身也是一个文件，称为镜像文件</li> <li>一个容器运行一种服务，当我们需要的时候，就可以通过<code>Docker</code>客户端创建一个对应的运行实例，也就是我们的容器。</li> <li>仓库就是放了一堆镜像的地方，我们可以把镜像发布到仓库种，需要的时候从仓库中拉下来就可以了。</li></ul> <h2 id="docker安装并设置镜像加速"><a href="#docker安装并设置镜像加速" aria-hidden="true" class="header-anchor">#</a> Docker安装并设置镜像加速</h2> <h3 id="下载rpm包"><a href="#下载rpm包" aria-hidden="true" class="header-anchor">#</a> <strong>下载rpm包</strong></h3> <p><strong>首先，我们打开链接：</strong> <a href="https://download.docker.com/linux/centos/7/x86_64/stable/Packages/" target="_blank" rel="noopener noreferrer">点击这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>下载以下2个rpm包</strong></p> <p><code>docker-ce-17.03.0.ce-1.el7.centos.x86_64.rpm</code></p> <p><code>docker-ce-selinux-17.03.0.ce-1.el7.centos.noarch.rpm</code></p> <h3 id="安装防火墙"><a href="#安装防火墙" aria-hidden="true" class="header-anchor">#</a> <strong>安装防火墙</strong></h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> iptables-services
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>启动防火墙</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl start iptables
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>设为开机自启</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> iptables
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>清空默认规则</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>iptables -F
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>保存默认规则</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> iptables save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="更新软件包"><a href="#更新软件包" aria-hidden="true" class="header-anchor">#</a> 更新软件包</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum update
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>重启</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">reboot</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="安装rpm包"><a href="#安装rpm包" aria-hidden="true" class="header-anchor">#</a> 安装rpm包</h3> <p><strong>在root目录下新建docker文件夹，把下载的两个文件放到文件夹里。</strong></p> <p><strong>安装rpm包</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum -y <span class="token function">install</span> *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>验证是否安装成功</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl start docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl <span class="token builtin class-name">enable</span> docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>查看运行状态</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl status docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>查看是否能正常运行</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run hello-world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>如果看到 &quot;Hello from Docker!&quot;说明docker安装成功。</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/8/1/16c4b00169f7aeb2?w=787&amp;h=418&amp;f=png&amp;s=29448" alt=""></p> <blockquote><p>如果执行 <code>docker run hello-world</code> 的时候报<code>docker: Error response from daemon: Get https://registry-1.docker.io/v2/XXX</code>，请先执行底下的步骤设置加速，最后执行该命令即可解决。</p></blockquote> <h3 id="docker-镜像仓库加速配置"><a href="#docker-镜像仓库加速配置" aria-hidden="true" class="header-anchor">#</a> <strong>Docker 镜像仓库加速配置</strong></h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> /lib/systemd/system/docker.service  /etc/systemd/system/docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>给权限</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">chmod</span> a+x /etc/systemd/system/docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>打开管理脚本</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/systemd/system/docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>在 ExecStart=/usr/bin/dockerd 后加上下面这句</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>--registry-mirror<span class="token operator">=</span>https://kfp63jaj.mirror.aliyuncs.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>其中<code>https://kfp63jaj.mirror.aliyuncs.com</code>，这个地址大家可以去<a href="https://dev.aliyun.com/" target="_blank" rel="noopener noreferrer">阿里云Docker官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>获取。也可以使用上面的地址，因为是免费的嘛。</p></blockquote> <p><strong>获取加速镜像地址（可选）</strong></p> <p>控制台找到容器镜像服务，然后在镜像中心下的镜像加速器得到加速地址。</p> <p><img src="https://user-gold-cdn.xitu.io/2019/8/1/16c4b0031c1baeb8?w=938&amp;h=885&amp;f=png&amp;s=169217" alt=""></p> <p><strong>接下来重载管理脚本</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl daemon-reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>重启docker</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl restart docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>查看进程</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> -ef<span class="token operator">|</span><span class="token function">grep</span> docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>如何看到刚才链接的这句话，说明加速成功。</strong></p> <p><img src="https://user-gold-cdn.xitu.io/2019/8/1/16c4b0017238276c?w=764&amp;h=192&amp;f=png&amp;s=16835" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/doc/docker/introduction.html" class="prev">
          Docker简介
        </a></span> <span class="next"><a href="/doc/docker/mirrorCommand.html">
          镜像命令
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/doc/assets/js/app.b62443c3.js" defer></script><script src="/doc/assets/js/2.101d40a6.js" defer></script><script src="/doc/assets/js/8.9b1365b6.js" defer></script>
  </body>
</html>
